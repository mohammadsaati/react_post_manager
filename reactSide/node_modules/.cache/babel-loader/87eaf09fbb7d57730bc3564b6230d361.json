{"ast":null,"code":"import _slicedToArray from \"C:\\\\xampp\\\\htdocs\\\\react_cms\\\\clinet\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\react_cms\\\\clinet\\\\src\\\\components\\\\pages\\\\ResetPassword.js\";\nimport React, { useState, useContext } from 'react';\nimport cookies from 'js-cookie';\nimport Alert from '../../context/alert/alertContext';\nimport axios from 'axios';\n\nconst ResetPassword = () => {\n  if (cookies.get('userName') == null) {\n    window.location.href = \"/logIn\";\n  }\n\n  const alertContext = useContext(Alert);\n  const setAlert = alertContext.setAlert;\n  const userData = cookies.getJSON('user_data');\n\n  const _useState = useState(''),\n        _useState2 = _slicedToArray(_useState, 2),\n        email = _useState2[0],\n        setEmail = _useState2[1];\n\n  const _useState3 = useState(''),\n        _useState4 = _slicedToArray(_useState3, 2),\n        password = _useState4[0],\n        setPassword = _useState4[1];\n\n  const onChange = e => setEmail(e.target.value);\n\n  const changePassword = e => setPassword(e.target.value);\n\n  const onSubmit = e => {\n    e.preventDefault();\n\n    if (email === userData.email) {\n      document.querySelector('.userInfo').style.display = 'block';\n      document.querySelector('.emailInfo').style.display = 'none';\n    } else {\n      setAlert('You\\'r email is wrong.Please inter you\\'r own email.', 'warning');\n    }\n  };\n\n  const passwordApi = async $newPassword => {\n    const passwordResponse = await axios.get(\"http://localhost/react_cms/api/users/reset.php?\\n            userName=\".concat(userData.userName, \"&\\n            password=\").concat(userData.password, \"&\\n            newPassword=\").concat($newPassword));\n    console.log(passwordResponse.data);\n  };\n\n  const newPassword = e => {\n    e.preventDefault();\n    passwordApi(password);\n    localStorage.removeItem('password');\n    localStorage.removeItem('userName');\n    cookies.remove('password');\n    cookies.remove('userName');\n    cookies.remove('user_data');\n    window.location.href = '/logIn';\n  };\n\n  return React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"row emailInfo\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"card col-12 mt-4\",\n    style: {\n      padding: '30px'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    onSubmit: onSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"email\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, \"Email : \"), React.createElement(\"input\", {\n    type: \"email\",\n    required: true,\n    name: \"email\",\n    className: \"form-control\",\n    value: email,\n    onChange: onChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"submit\",\n    style: {\n      width: '30%'\n    },\n    className: \"m-4 col-6 btn btn-outline-success text-center\",\n    value: \"Check my email\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    className: \"col-6 btn btn-warning\",\n    style: {\n      width: '30%'\n    },\n    onClick: () => {\n      window.location.href = '/panel';\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, \"Cancel\"))))), React.createElement(\"div\", {\n    className: \"row userInfo\",\n    style: {\n      display: 'none'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"card col-6 mt-4\",\n    style: {\n      padding: '30px'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col-6\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"text-left\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, \"Your old password was \", userData.password)), React.createElement(\"div\", {\n    className: \"col-6\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"btn btn-warning\",\n    onClick: () => {\n      window.location.href = '/panel';\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, \"Cancel\"))), React.createElement(\"form\", {\n    onSubmit: newPassword,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"password\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, \"new Password : \"), React.createElement(\"input\", {\n    type: \"password\",\n    required: true,\n    name: \"password\",\n    className: \"form-control\",\n    value: password,\n    onChange: changePassword,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  })), React.createElement(\"input\", {\n    type: \"submit\",\n    style: {\n      width: '100%'\n    },\n    className: \"btn btn-danger text-center\",\n    value: \"set password\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  })))));\n};\n\nexport default ResetPassword;","map":{"version":3,"sources":["C:\\xampp\\htdocs\\react_cms\\clinet\\src\\components\\pages\\ResetPassword.js"],"names":["React","useState","useContext","cookies","Alert","axios","ResetPassword","get","window","location","href","alertContext","setAlert","userData","getJSON","email","setEmail","password","setPassword","onChange","e","target","value","changePassword","onSubmit","preventDefault","document","querySelector","style","display","passwordApi","$newPassword","passwordResponse","userName","console","log","data","newPassword","localStorage","removeItem","remove","padding","width"],"mappings":"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","sourcesContent":["import React , { useState , useContext } from 'react';\r\nimport cookies from 'js-cookie';\r\nimport Alert from '../../context/alert/alertContext';\r\nimport axios from 'axios';\r\n\r\nconst ResetPassword = () => {\r\n\r\n    if(cookies.get('userName')==null) {\r\n        window.location.href=\"/logIn\";\r\n    }\r\n\r\n    const alertContext = useContext(Alert);\r\n    const { setAlert } = alertContext\r\n\r\n    const userData = cookies.getJSON('user_data');\r\n\r\n    const [email , setEmail] = useState('');\r\n    const [password , setPassword] = useState('');\r\n\r\n    const onChange = e => setEmail(e.target.value);\r\n\r\n    const changePassword = e => setPassword(e.target.value);\r\n\r\n    const onSubmit = e => {\r\n        e.preventDefault();\r\n        if(email===userData.email) {\r\n            document.querySelector('.userInfo').style.display='block';\r\n            document.querySelector('.emailInfo').style.display='none';    \r\n        } else {\r\n            setAlert('You\\'r email is wrong.Please inter you\\'r own email.' , 'warning');\r\n        }\r\n    }\r\n\r\n    const passwordApi = async ($newPassword) => {\r\n        const passwordResponse = await axios.get(`http://localhost/react_cms/api/users/reset.php?\r\n            userName=${userData.userName}&\r\n            password=${userData.password}&\r\n            newPassword=${$newPassword}`);\r\n        console.log(passwordResponse.data);    \r\n    }\r\n\r\n    const newPassword = e => {\r\n        e.preventDefault();\r\n        passwordApi(password);\r\n        localStorage.removeItem('password');\r\n        localStorage.removeItem('userName');\r\n        cookies.remove('password');\r\n        cookies.remove('userName');\r\n        cookies.remove('user_data');\r\n        window.location.href='/logIn';\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"container\">\r\n\r\n            <div className=\"row emailInfo\">\r\n                <div className=\"card col-12 mt-4\" style={{padding:'30px'}}>\r\n                    <form onSubmit={onSubmit}>\r\n                        <div className=\"form-group\">\r\n                            <label htmlFor=\"email\">Email : </label>\r\n                            <input type=\"email\" required name=\"email\" className=\"form-control\" value={email} onChange={onChange} />\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            \r\n                            <input type=\"submit\" style={{width:'30%'}} className=\"m-4 col-6 btn btn-outline-success text-center\" value=\"Check my email\" />\r\n                          \r\n                            <button className=\"col-6 btn btn-warning\" style={{width:'30%'}}\r\n                                onClick={()=>{window.location.href='/panel'}}\r\n                                >Cancel</button>\r\n\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"row userInfo\" style={{display:'none'}}>\r\n                <div className=\"card col-6 mt-4\" style={{padding:'30px'}}>\r\n                    \r\n                    <div className=\"row\">\r\n                        <div className=\"col-6\"><p className=\"text-left\">Your old password was {userData.password}</p></div>\r\n                        <div className=\"col-6\">\r\n                            <button className=\"btn btn-warning\"\r\n                            onClick={()=>{window.location.href='/panel'}}\r\n                            >Cancel</button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <form onSubmit={newPassword}>\r\n                    <div className=\"form-group\">\r\n                         <label htmlFor=\"password\">new Password : </label>\r\n                         <input type=\"password\" required name=\"password\" className=\"form-control\" value={password} onChange={changePassword} />\r\n                    </div>\r\n                        <input type=\"submit\" style={{width:'100%'}} className=\"btn btn-danger text-center\" value=\"set password\" />\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ResetPassword\r\n"]},"metadata":{},"sourceType":"module"}