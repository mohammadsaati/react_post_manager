{"ast":null,"code":"import _slicedToArray from \"C:\\\\xampp\\\\htdocs\\\\react_cms\\\\clinet\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\react_cms\\\\clinet\\\\src\\\\context\\\\user\\\\UserState.js\";\nimport React, { useReducer, useState } from 'react';\nimport axios from 'axios';\nimport UserContext from './userContext';\nimport userReducer from './userReducer';\nimport { REGISTER_USER, LOGIN, LOGIN_PROCESS } from '../type';\n\nconst UserState = props => {\n  const initialState = {\n    firstName: '',\n    lastName: '',\n    email: '',\n    role: '',\n    userName: '',\n    password: '',\n    message: '',\n    singleUser: null,\n    isAuthenticated: false\n  };\n\n  const _useState = useState(null),\n        _useState2 = _slicedToArray(_useState, 2),\n        userSingle = _useState2[0],\n        setUserSingle = _useState2[1];\n\n  const _useReducer = useReducer(userReducer, initialState),\n        _useReducer2 = _slicedToArray(_useReducer, 2),\n        state = _useReducer2[0],\n        dispatch = _useReducer2[1]; //Register user\n\n\n  const registerUser = async userData => {\n    console.log(userData);\n    const response = await axios.get(\"http://localhost/react_cms/api/users/register.php?firstName=\".concat(userData.firstName, \"&\\n        lastName=\").concat(userData.lastName, \"&\\n        userName=\").concat(userData.userName, \"&\\n        password=\").concat(userData.password, \"&\\n        email=\").concat(userData.email));\n    dispatch({\n      type: REGISTER_USER,\n      payload: response.data\n    });\n  }; //LogIn user\n\n\n  const userLogIn = async loginData => {\n    const logInresponse = await axios.get(\"http://localhost/react_cms/api/users/login.php?userName=\".concat(loginData.userName, \"\\n    &password=\").concat(loginData.password));\n\n    if (logInresponse.data.isAuthenticated) {\n      localStorage.setItem('userName', logInresponse.data.userName);\n      localStorage.setItem('password', logInresponse.data.password);\n    } else {\n      localStorage.removeItem('userName');\n      localStorage.removeItem('password');\n    }\n\n    dispatch({\n      type: LOGIN,\n      payload: logInresponse.data\n    });\n    setUserSingle(logInresponse.data);\n    console.log(logInresponse.data);\n  };\n\n  return React.createElement(UserContext.Provider, {\n    value: {\n      firstName: state.firstName,\n      lastName: state.lastName,\n      email: state.email,\n      userName: state.userName,\n      password: state.password,\n      message: state.message,\n      role: state.role,\n      isAuthenticated: state.isAuthenticated,\n      singleUser: state.singleUser,\n      registerUser,\n      userLogIn,\n      userSingle\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, props.children);\n};\n\nexport default UserState;","map":{"version":3,"sources":["C:\\xampp\\htdocs\\react_cms\\clinet\\src\\context\\user\\UserState.js"],"names":["React","useReducer","useState","axios","UserContext","userReducer","REGISTER_USER","LOGIN","LOGIN_PROCESS","UserState","props","initialState","firstName","lastName","email","role","userName","password","message","singleUser","isAuthenticated","userSingle","setUserSingle","state","dispatch","registerUser","userData","console","log","response","get","type","payload","data","userLogIn","loginData","logInresponse","localStorage","setItem","removeItem","children"],"mappings":"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","sourcesContent":["import React, { useReducer  , useState} from 'react';\r\nimport axios from 'axios';\r\nimport UserContext from './userContext';\r\nimport userReducer from './userReducer';\r\n\r\nimport {\r\n  REGISTER_USER , \r\n  LOGIN ,\r\n  LOGIN_PROCESS\r\n} from '../type';\r\n\r\n\r\nconst UserState = props => {\r\n  const initialState = {\r\n    firstName : '',\r\n    lastName : '',\r\n    email : '',\r\n    role : '',\r\n    userName : '',\r\n    password : '' , \r\n    message : '' , \r\n    singleUser : null,\r\n    isAuthenticated : false\r\n  };\r\n\r\n  const [userSingle , setUserSingle] = useState(null);\r\n\r\n  const [state, dispatch] = useReducer(userReducer, initialState);\r\n\r\n  //Register user\r\nconst registerUser = async userData =>{\r\n\r\n   console.log(userData);\r\n    const response  = await axios.get(\r\n\r\n        `http://localhost/react_cms/api/users/register.php?firstName=${userData.firstName}&\r\n        lastName=${userData.lastName}&\r\n        userName=${userData.userName}&\r\n        password=${userData.password}&\r\n        email=${userData.email}`\r\n        );\r\n\r\n\r\n    dispatch({\r\n      type : REGISTER_USER , \r\n      payload : response.data\r\n    \r\n    });\r\n    \r\n}\r\n\r\n//LogIn user\r\nconst userLogIn = async (loginData) => {\r\n\r\n \r\n\r\n    const logInresponse = await axios.get(`http://localhost/react_cms/api/users/login.php?userName=${loginData.userName}\r\n    &password=${loginData.password}`);\r\n\r\n    \r\n    if(logInresponse.data.isAuthenticated) {\r\n      localStorage.setItem('userName' , logInresponse.data.userName);\r\n      localStorage.setItem('password' , logInresponse.data.password);\r\n    } else {\r\n      localStorage.removeItem('userName');\r\n      localStorage.removeItem('password');\r\n    }\r\n\r\n    dispatch({type:LOGIN , payload : logInresponse.data});\r\n    setUserSingle(logInresponse.data);\r\n    \r\n    console.log(logInresponse.data);\r\n  \r\n}\r\n\r\nreturn (\r\n    <UserContext.Provider \r\n    value={{\r\n        firstName : state.firstName,\r\n        lastName : state.lastName,\r\n        email : state.email,\r\n        userName : state.userName , \r\n        password : state.password,\r\n        message : state.message,\r\n        role : state.role,\r\n        isAuthenticated : state.isAuthenticated,\r\n        singleUser : state.singleUser,\r\n        registerUser,\r\n        userLogIn,\r\n        userSingle\r\n    }}>\r\n    {props.children}\r\n    </UserContext.Provider>\r\n);\r\n\r\n \r\n}\r\n\r\nexport default UserState;\r\n\r\n\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}