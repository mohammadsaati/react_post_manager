{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\react_cms\\\\clinet\\\\src\\\\components\\\\pages\\\\EditPost.js\";\nimport React, { useEffect, useContext } from 'react';\nimport axios from 'axios';\nimport cookies from 'js-cookie';\nimport EditForm from '../layout/EditPostForm';\nimport Alert from '../../context/alert/alertContext';\n\nconst EditPost = props => {\n  const post_id = props.match.params.post_id;\n  const userData = cookies.getJSON('user_data');\n  const alertContext = useContext(Alert);\n  const setAlert = alertContext.setAlert;\n\n  const getPostById = async () => {\n    const oldPostRes = await axios.get(\"http://localhost/react_cms/api/posts/specialPost.php?post_id=\".concat(post_id));\n    localStorage.setItem('currentPost', JSON.stringify(oldPostRes.data));\n  };\n\n  useEffect(() => {\n    getPostById();\n  }, []);\n\n  const onUpdatting = async updatedPost => {\n    const updatePostRes = await axios.get(\"http://localhost/react_cms/api/posts/updatePost.php?\\n       user_id=\".concat(userData.user_id, \"&\\n       post_id=\").concat(post_id, \"&\\n       cat_id=\").concat(updatedPost.update_cat_id, \"&\\n       title=\").concat(updatedPost.update_title, \"&\\n       discription=\").concat(updatedPost.update_discription, \"&\\n       status=\").concat(updatedPost.update_status, \"\\n        \"));\n\n    if (updatePostRes.data.message === 'It was successful.') {\n      setAlert('Good it was suucessful', 'success');\n      window.location.href = '/panel';\n    }\n  };\n\n  return React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, React.createElement(EditForm, {\n    onSaving: onUpdatting,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }));\n};\n\nexport default EditPost;","map":{"version":3,"sources":["C:\\xampp\\htdocs\\react_cms\\clinet\\src\\components\\pages\\EditPost.js"],"names":["React","useEffect","useContext","axios","cookies","EditForm","Alert","EditPost","props","post_id","match","params","userData","getJSON","alertContext","setAlert","getPostById","oldPostRes","get","localStorage","setItem","JSON","stringify","data","onUpdatting","updatedPost","updatePostRes","user_id","update_cat_id","update_title","update_discription","update_status","message","window","location","href"],"mappings":";AAAA,OAAOA,KAAP,IAAiBC,SAAjB,EAA8BC,UAA9B,QAAgD,OAAhD;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,QAAP,MAAqB,wBAArB;AACA,OAAOC,KAAP,MAAkB,kCAAlB;;AAGA,MAAMC,QAAQ,GAAIC,KAAD,IAAW;AAAA,QAChBC,OADgB,GACJD,KAAK,CAACE,KAAN,CAAYC,MADR,CAChBF,OADgB;AAGxB,QAAMG,QAAQ,GAAGR,OAAO,CAACS,OAAR,CAAgB,WAAhB,CAAjB;AAEA,QAAMC,YAAY,GAAGZ,UAAU,CAACI,KAAD,CAA/B;AALwB,QAMhBS,QANgB,GAMHD,YANG,CAMhBC,QANgB;;AASxB,QAAMC,WAAW,GAAG,YAAY;AAC5B,UAAMC,UAAU,GAAG,MAAMd,KAAK,CAACe,GAAN,wEAA0ET,OAA1E,EAAzB;AAEAU,IAAAA,YAAY,CAACC,OAAb,CAAqB,aAArB,EAAqCC,IAAI,CAACC,SAAL,CAAeL,UAAU,CAACM,IAA1B,CAArC;AACH,GAJD;;AAMAtB,EAAAA,SAAS,CAAC,MAAK;AACXe,IAAAA,WAAW;AACd,GAFQ,EAEN,EAFM,CAAT;;AAKA,QAAMQ,WAAW,GAAG,MAAMC,WAAN,IAAsB;AACvC,UAAMC,aAAa,GAAG,MAAMvB,KAAK,CAACe,GAAN,gFAClBN,QAAQ,CAACe,OADS,+BAElBlB,OAFkB,8BAGnBgB,WAAW,CAACG,aAHO,6BAIpBH,WAAW,CAACI,YAJQ,mCAKdJ,WAAW,CAACK,kBALE,8BAMnBL,WAAW,CAACM,aANO,gBAA5B;;AASA,QAAGL,aAAa,CAACH,IAAd,CAAmBS,OAAnB,KAA6B,oBAAhC,EAAsD;AAClDjB,MAAAA,QAAQ,CAAC,wBAAD,EAA4B,SAA5B,CAAR;AACAkB,MAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAqB,QAArB;AACH;AACH,GAdD;;AAiBA,SACI;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,QAAD;AAAU,IAAA,QAAQ,EAAEX,WAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADJ;AAKH,CA1CD;;AA4CA,eAAejB,QAAf","sourcesContent":["import React , { useEffect  , useContext } from 'react';\r\nimport axios from 'axios';\r\nimport cookies from 'js-cookie';\r\nimport EditForm from '../layout/EditPostForm';\r\nimport Alert from '../../context/alert/alertContext';\r\n\r\n\r\nconst EditPost = (props) => {\r\n    const { post_id } = props.match.params;\r\n\r\n    const userData = cookies.getJSON('user_data');\r\n\r\n    const alertContext = useContext(Alert);\r\n    const { setAlert } = alertContext;\r\n\r\n\r\n    const getPostById = async () => {\r\n        const oldPostRes = await axios.get(`http://localhost/react_cms/api/posts/specialPost.php?post_id=${post_id}`);\r\n\r\n        localStorage.setItem('currentPost' , JSON.stringify(oldPostRes.data));\r\n    }\r\n\r\n    useEffect(()=> {\r\n        getPostById();\r\n    }, []);\r\n\r\n    \r\n    const onUpdatting = async(updatedPost) => {\r\n       const updatePostRes = await axios.get(`http://localhost/react_cms/api/posts/updatePost.php?\r\n       user_id=${userData.user_id}&\r\n       post_id=${post_id}&\r\n       cat_id=${updatedPost.update_cat_id}&\r\n       title=${updatedPost.update_title}&\r\n       discription=${updatedPost.update_discription}&\r\n       status=${updatedPost.update_status}\r\n        `);\r\n\r\n       if(updatePostRes.data.message==='It was successful.') {\r\n           setAlert('Good it was suucessful' , 'success');\r\n           window.location.href='/panel';\r\n       }\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"container\">\r\n          <EditForm onSaving={onUpdatting}/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default EditPost\r\n"]},"metadata":{},"sourceType":"module"}